<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G10 Transportes - Gest√£o de Fretes</title>
    <link rel="stylesheet" href="../../css/menu.css">
    <link rel="stylesheet" href="css/shared-styles.css">
    <link rel="shortcut icon" href="../../assets/favcom.png" type="image/x-icon">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=note_alt" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
</head>

<body>

    <nav class="sidebar">
        <div class="hamburger-menu">
            <div class="hamburger"></div>
        </div>
        <ul class="nav-list">
            <li>
                <a href="../PLANILHA/lista_fretes.html">
                    <i class="fas fa-table"></i>
                    <span>Planilha</span>
                </a>
            </li>
            <li>
                <a href="../CHAT/chat.html">
                    <i class="fas fa-comments"></i>
                    <span>Chat</span>
                </a>
            </li>
            <li>
                <a href="../CALCULADORAS/calculadoras.html">
                    <i class="fas fa-calculator"></i>
                    <span>Calculadoras</span>
                </a>
            </li>
            <li>
                <a href="../OC/oc.html">    
                    <i class="fas fa-pencil-alt"></i>
                    <span>Ordens Manuais</span>
                </a>
            </li>
            <li>
                <a href="../CONTATOS/contato.html">
                    <i class="fas fa-address-book"></i>
                    <span>Lista de Contatos</span>
                </a>
            </li>
            <li>
                <a href="../MOSTRADOR/index1.html">
                    <i class="fas fa-tv"></i>
                    <span>Divulga√ß√£o</span>
                </a>
            </li>

            <li class="double-icon">
                <a href="../utilitarios/index.html">
                    <i class="fas fa-tools"></i>
                    <span>Utilit√°rios</span>
                </a>
            </li>
            

            <li>
                <a href="../TRACKING/indextracking.html">
                    <i class="fas fa-truck"></i>
                    <span>Tracking</span>
                </a>
            </li>
            <li>
                <a href="../PLANILHA/dashboard.html">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li>
                <a href="../dashboard.html">
                    <i class="fas fa-home"></i>
                    <span>In√≠cio</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Main Content Area -->
    <main class="main-content">
        <div class="page-container">
            <div class="content-wrapper">
                <div class="form-card">
                    <header class="form-header">
                        <h1>Adicionar/Editar Frete</h1>
                        <p class="form-subtitle">Gest√£o completa de fretes para exibi√ß√£o</p>
                    </header>
                    
                    <form id="freteForm">
                        <div class="form-section">
                            <h3>Informa√ß√µes do Frete</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="origem">Origem</label>
                                    <input type="text" id="origem" placeholder="Origem" value="S√£o Francisco do Sul" readonly>
                                </div>
                                <div class="form-group">
                                    <label for="uf">UF</label>
                                    <select id="uf" required>
                                        <option value="SC - SFCO">Santa Catarina - SFCO</option>
                                        <option value="">Selecione a UF</option>                        
                                        <option value="SC - IMBITUBA">Santa Catarina - Imbituba</option>
                                        <option value="MT">Mato Grosso</option>
                                        <option value="GO">Goi√°s</option>
                                        <option value="RO">Rond√¥nia</option>
                                        <option value="PA">Par√°</option>
                                        <option value="SP">S√£o Paulo</option>
                                        <option value="PR">Paran√°</option>
                                        <option value="MS">Mato Grosso do Sul</option>
                                        <option value="MG">Minas Gerais</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="destino">Destino</label>
                                    <input type="text" id="destino" placeholder="Destino" required>
                                </div>
                                <div class="form-group">
                                    <label for="valor">Valor (R$)</label>
                                    <input type="number" id="valor" step="0.01" placeholder="Valor (R$)" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="tipo">Tipo de Carga</label>
                                    <select id="tipo" required>
                                        <option value="">Tipo de Carga</option>
                                        <option value="BIG BAG">BIG BAG</option>
                                        <option value="GRANEL">Granel</option>
                                        <option value="OUTROS">OUTROS</option>
                                        <option value="BOBINA">BOBINA</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="observacoes">Observa√ß√µes</label>
                                    <input type="text" id="observacoes" placeholder="Observa√ß√µes (ex: 50T)">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary" id="btnSalvar">
                                <span class="btn-icon">üíæ</span>
                                Adicionar Frete
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="cancelarEdicao()">
                                <span class="btn-icon">‚ùå</span>
                                Cancelar
                            </button>
                        </div>
                    </form>
                    
                    <div class="form-actions" style="margin-top: 2rem;">
                        <button id="btnMostrarFretes" class="btn btn-primary" style="width: 100%;">
                            <span class="btn-icon">üìã</span>
                            Mostrar Fretes
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="../../js/menu.js"></script>

    <script>
        let fretes = JSON.parse(localStorage.getItem('fretes')) || [];
        let editId = null;

        function salvarFrete(e) {
            e.preventDefault();

            const frete = {
                id: editId || Date.now(),
                origem: document.getElementById('origem').value,
                uf: document.getElementById('uf').value,
                destino: document.getElementById('destino').value,
                valor: parseFloat(document.getElementById('valor').value),
                tipo: document.getElementById('tipo').value,
                observacoes: document.getElementById('observacoes').value
            };

            if (editId) {
                const index = fretes.findIndex(f => f.id === editId);
                fretes[index] = frete;
            } else {
                fretes.push(frete);
            }

            localStorage.setItem('fretes', JSON.stringify(fretes));
            document.getElementById('freteForm').reset();
            editId = null;
            document.getElementById('btnSalvar').textContent = 'Adicionar Frete';
        }

        function cancelarEdicao() {
            document.getElementById('freteForm').reset();
            editId = null;
            document.getElementById('btnSalvar').textContent = 'Adicionar Frete';
        }

        function editarFrete(id) {
            const frete = fretes.find(f => f.id === id);
            if (!frete) return;

            editId = id;

            document.getElementById('uf').value = frete.uf;
            document.getElementById('destino').value = frete.destino;
            document.getElementById('valor').value = frete.valor;
            document.getElementById('tipo').value = frete.tipo;
            document.getElementById('observacoes').value = frete.observacoes;
            document.getElementById('btnSalvar').textContent = 'Atualizar Frete';
        }

        // Check for edit parameter in URL
        const urlParams = new URLSearchParams(window.location.search);
        const editParam = urlParams.get('edit');
        if (editParam) {
            editarFrete(parseInt(editParam));
        }

        document.getElementById('btnMostrarFretes').addEventListener('click', () => {
            localStorage.setItem('fretes', JSON.stringify(fretes));
            window.location.href = 'lista_fretes.html';
        });

        document.getElementById('freteForm').addEventListener('submit', salvarFrete);
    </script>
</body>

</html>